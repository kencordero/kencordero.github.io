import{k as T,l as q,t as E,u as A,v as V,x as U}from"./chunk-2CEILZOM.js";import{Ab as B,Bb as I,Cb as k,Db as C,Eb as S,Fb as f,Gb as a,Hb as c,Ib as g,Mb as P,Qb as p,Sb as m,Ta as l,ac as W,bc as d,cc as y,db as M,dc as _,gc as v,ha as u,hc as D,ia as h,ic as F,mc as b,oc as x,pc as w,zb as L}from"./chunk-EJOKWYH3.js";var j=s=>({red:s}),z=s=>({yellow:s}),N=s=>({bold:s});function $(s,o){if(s&1&&(a(0,"span",5),d(1),x(2,"uppercase"),c()),s&2){let n=o.$implicit,t=o.$index;W(b(5,z,t===3)),l(),_("",w(2,3,n)," ")}}function G(s,o){if(s&1&&(a(0,"li"),d(1),c()),s&2){let n=o.$implicit,t=m(2);W(b(3,N,t.isPangram(n))),l(),y(n)}}function R(s,o){if(s&1){let n=P();C(0,$,3,7,"span",1,I),a(2,"button",2),p("click",function(){u(n);let e=m();return h(e.scramble())}),d(3,"Scramble"),c(),g(4,"br")(5,"br"),a(6,"p"),d(7),c(),a(8,"input",3),p("keydown.enter",function(){u(n);let e=m();return h(e.testWord())}),F("ngModelChange",function(e){u(n);let r=m();return D(r.userInput,e)||(r.userInput=e),h(e)}),c(),a(9,"button",2),p("click",function(){u(n);let e=m();return h(e.showAllWords())}),d(10,"Show All"),c(),a(11,"p"),d(12),x(13,"number"),c(),a(14,"p"),d(15),x(16,"number"),c(),g(17,"br"),a(18,"ul"),C(19,G,2,5,"li",4,k),c()}if(s&2){let n=m();S(n.scrambledWord),l(2),f("disabled",n.isDone),l(4),W(b(13,j,!n.message.startsWith("Pangram")&&!n.message.startsWith("Good"))),l(),y(n.message),l(),f("disabled",n.isDone),v("ngModel",n.userInput),l(),f("disabled",n.isDone),l(3),_("Max Score: ",w(13,9,n.maxScore)),l(3),_("Score: ",w(16,11,n.score)),l(4),S(n.acceptedWords)}}var Q=(()=>{let o=class o{constructor(){this.words=[],this.currentWord=void 0,this.scrambledWord=void 0,this.userInput="",this.message="",this.acceptedWordSet=new Set,this.acceptedWords=[],this.score=0,this.totalWords=[],this.isDone=!1,console.log("isDone initialized to false"),this.loadWordList()}loadWordList(){fetch("assets/words_alpha.txt").then(t=>t.text()).then(t=>{this.words=t.split(`
`).map(e=>e.trim()).filter(e=>e.length>3&&e.length<20&&!e.includes("s"))}).catch(t=>console.error("Error loading word list:",t))}clearFields(){this.userInput="",this.message="",this.acceptedWordSet.clear(),this.acceptedWords=[],this.score=0,this.totalWords=[],this.maxScore=void 0,this.isDone=!1,console.log("isDone set to false")}getRandomWord(){this.clearFields();let t=this.filterWordsByUniqueLetters(7),e=Math.floor(Math.random()*t.length);this.currentWord=t[e];let r=this.getUniqueLetters(this.currentWord),i=this.scrambleWord(Array.from(r).join(""));for(;i===this.currentWord;)i=this.scrambleWord(Array.from(r).join(""));this.scrambledWord=i.split(""),console.log(`Word: ${this.currentWord}`),this.getAllPossibleWords()}getUniqueLetters(t){return new Set(t.split(""))}filterWordsByUniqueLetters(t){return this.words.filter(e=>this.getUniqueLetters(e).size===t)}scrambleWord(t){let e=t.split("");for(let r=e.length-1;r>0;r--){let i=Math.floor(Math.random()*(r+1));[e[r],e[i]]=[e[i],e[r]]}return e.join("")}testWord(){this.message=" ";let t=this.userInput?.toLowerCase().trim();if(this.userInput="",!this.currentWord)return this.message="No current word",!1;if(t.length<4)return this.message="Too short",!1;if(t.length>19)return this.message="Too long",!1;if(this.acceptedWordSet.has(t))return this.message="Already found",!1;let e=this.scrambledWord[3];if(!t.includes(e))return this.message="Missing center letter",!1;let r=this.currentWord.split("");for(let O of t)if(r.indexOf(O)===-1)return this.message="Bad letters",!1;if(!this.words.includes(t))return this.message="Not in word list",!1;let i=0;return t.length===4?i+=1:i+=t.length,this.isPangram(t)?(this.message="Pangram! +"+t.length,i+=7):this.message="Good +"+i,this.score+=i,this.acceptedWordSet.add(t),this.acceptedWords.push(t),this.acceptedWords.sort(),!0}isPangram(t){if(!this.currentWord)return!1;let e=this.getUniqueLetters(this.currentWord),r=this.getUniqueLetters(t);return e.size===r.size&&[...e].every(i=>r.has(i))}getWordScore(t){let e=0;return t.length===4?e+=1:e+=t.length,this.isPangram(t)&&(e+=7),e}getAllPossibleWords(){if(!this.currentWord)return;let t=this.scrambledWord[3];this.totalWords=this.words.filter(e=>e.includes(t)&&this.canFormWordFromLetters(e,this.currentWord)).sort();for(let e of this.totalWords)this.maxScore=(this.maxScore||0)+this.getWordScore(e)}canFormWordFromLetters(t,e){let r=e.split("");for(let i of t)if(r.indexOf(i)===-1)return!1;return!0}showAllWords(){this.isDone=!0,console.log("isDone set to true"),this.acceptedWords=[...this.totalWords]}scramble(){if(!this.currentWord)return;let t=this.scrambledWord[3],e=this.scrambledWord.filter((r,i)=>i!==3);for(let r=e.length-1;r>0;r--){let i=Math.floor(Math.random()*(r+1));[e[r],e[i]]=[e[i],e[r]]}e.splice(3,0,t),this.scrambledWord=e}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=M({type:o,selectors:[["ken-scramble-bee"]],decls:4,vars:1,consts:[[3,"click"],[1,"letter",3,"class"],[3,"click","disabled"],["mat-input","","type","text","placeholder","Your answer here",3,"keydown.enter","ngModelChange","disabled","ngModel"],[3,"class"],[1,"letter"]],template:function(e,r){e&1&&(a(0,"button",0),p("click",function(){return r.getRandomWord()}),d(1,"New word"),c(),g(2,"br"),L(3,R,21,15)),e&2&&(l(3),B(r.scrambledWord?3:-1))},dependencies:[U,E,A,V,q,T],styles:[".letter[_ngcontent-%COMP%]{font-size:2em;font-weight:700;padding-top:15px;margin:0 5px;width:.7em;text-align:center;display:inline-block}.yellow[_ngcontent-%COMP%]{color:#ffaf00}.red[_ngcontent-%COMP%]{color:#ff4c4c}.bold[_ngcontent-%COMP%]{font-weight:700}"]});let s=o;return s})();export{Q as ScrambleBeeComponent};
